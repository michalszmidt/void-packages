# Template file for 'supersonic-desktop'
pkgname=supersonic-desktop
version=0.8.2
revision=1
build_style=go
go_import_path="github.com/dweymouth/supersonic"
hostmakedepends="pkg-config gcc"
makedepends="libglvnd-devel mpv-devel libX11-devel libayatana-appindicator-devel libsecret-devel libXxf86vm-devel"
depends="libsecret libayatana-appindicator"
short_desc="Full-featured, mpv-based music player for Subsonic and Jellyfin servers"
maintainer="Micha≈Ç Szmidt <michal.sz@disroot.org>"
license="GPL-3.0-or-later"
homepage="https://github.com/dweymouth/supersonic"
distfiles="https://github.com/dweymouth/supersonic/archive/refs/tags/v${version}.tar.gz"
checksum=55ce49566d3350fe789934310509763dc2646ea09cc5c8d364daca49d692b185

post_install() {
	# go install command has no possibility to change name
	# https://github.com/golang/go/issues/47176
	# There is confilicting supersonic package on GitHub, see repology
	# https://repology.org/projects/?search=supersonic
	mv ${DESTDIR}/usr/bin/supersonic "${DESTDIR}/usr/bin/supersonic-desktop"
	vinstall res/appicon.png 644 usr/share/pixmaps supersonic-desktop.png
	vinstall res/supersonic-desktop.desktop 644 usr/share/applications
}
